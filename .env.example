# ============================================================================
# AI Transcriber - Environment Configuration
# ============================================================================
# Copy this file to .env and configure for your environment

# ============================================================================
# ENVIRONMENT
# ============================================================================
ENVIRONMENT=development  # Options: development, staging, production

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
# Redis is required for:
# - Celery task queue (broker)
# - Celery results backend
# - Server-Sent Events (SSE) pub/sub
# - LLM response caching

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB_CACHE=2
REDIS_DB_CELERY=0
REDIS_DB_CELERY_RESULT=1

# Require Redis in production (fail-fast if unavailable)
REDIS_REQUIRED=false  # Set to 'true' in production

# Alternative: SQLite broker (DEV ONLY - single worker, not for production)
# USE_SQLITE_BROKER=false

# ============================================================================
# SECURITY
# ============================================================================
# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:5173,http://localhost:4173,http://localhost:3000

# Maximum upload file size in MB
MAX_FILE_SIZE_MB=500

# ============================================================================
# LLM CONFIGURATION (Optional - System works without LLM)
# ============================================================================
# Ollama API endpoint for auto-correction and summarization
OLLAMA_BASE_URL=http://127.0.0.1:11434

# Model to use for LLM tasks (ensure it's pulled in Ollama)
LLM_MODEL=llama3:8b

# ============================================================================
# CACHE TTLs (Seconds)
# ============================================================================
TTL_LLM_CONTEXT=86400    # 24 hours - LLM context caching
TTL_VOCAB_HOTWORDS=3600  # 1 hour - Vocabulary hotwords

# ============================================================================
# AUDIO PROCESSING
# ============================================================================
SAMPLE_RATE=16000  # Audio sample rate for transcription

# ============================================================================
# TRANSCRIPTION BACKENDS
# ============================================================================
# Default backend: faster-whisper (CPU/CUDA) or whisper-cpp (Metal/CUDA/CPU)
WHISPER_BACKEND=faster-whisper

# Default model size: tiny, base, small, medium, large-v3
WHISPER_MODEL_SIZE=large-v3

# Whisper.cpp configuration (optional for macOS Metal acceleration)
WHISPER_CPP_AUTO_SETUP=false  # Auto-compile whisper.cpp on first run (slow)
# WHISPER_CPP_PATH=/path/to/whisper.cpp/main  # Manual path if pre-compiled

# Models to preload at startup (comma-separated)
PRELOAD_MODELS=base,large-v3

# ============================================================================
# SPEAKER DIARIZATION (Optional)
# ============================================================================
# Enable speaker detection and identification
ENABLE_SPEAKER_DIARIZATION=true

# HuggingFace token required for pyannote speaker diarization
# Get token from: https://huggingface.co/settings/tokens
# Accept terms at: https://huggingface.co/pyannote/speaker-diarization
# HUGGINGFACE_TOKEN=hf_xxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ============================================================================
# DATABASE
# ============================================================================
# SQLite (default for development)
# DATABASE_URL=sqlite:///./transcriber.db

# PostgreSQL (recommended for production)
# DATABASE_URL=postgresql://user:password@localhost:5432/transcriber_db

# Docker Compose PostgreSQL
# DATABASE_URL=postgresql://transcriber:password@localhost:5432/transcriber_db

# ============================================================================
# APPLICATION
# ============================================================================
PROJECT_NAME=AI Transcriber
VERSION=0.1.0
